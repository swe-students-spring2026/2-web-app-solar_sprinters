<!doctype html>
<html>
  <head>
    <title>Search Profiles</title>
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='css/style.css') }}"
    />
  </head>
  <body>
    <div class="container">
      <h1>Search Profiles</h1>

      <!-- FILTER AREA -->
      <div class="filters">
        <input type="text" id="searchName" placeholder="Search by name" />

        <input type="text" id="searchMajor" placeholder="Search by major" />

        <select id="searchTag">
          <option value="">Filter by tag</option>
          <option value="foodie">Foodie</option>
          <option value="asian">Asian</option>
          <option value="athletic">Athletic</option>
          <option value="travel">Travel</option>
        </select>
      </div>

      <hr />

      <!-- PROFILES LIST -->
      <div id="profileList">
        {% for profile in profiles %}
        <!-- Jinja template syntax-->
        <div
          class="card profile-card"
          data-name="{{ profile.name | lower }}"
          data-major="{{ profile.major | lower }}"
          data-tags="{{ profile.tags | join(' ') }}"
        >
          <h3>{{ profile.name }} {{ profile.emoji }}</h3>
          <p><strong>Major:</strong> {{ profile.major }}</p>
          <p><strong>Tags:</strong> {{ profile.tags | join(', ') }}</p>
          <p><strong>Description:</strong> {{ profile.description }}</p>
        </div>
        {% endfor %}
      </div>
    </div>

    <script>
      const nameInput = document.getElementById("searchName");
      const majorInput = document.getElementById("searchMajor");
      const tagSelect = document.getElementById("searchTag");
      const profileList = document.getElementById("profileList").children;

      function filterProfiles() {
        const nameFilter = nameInput.value.toLowerCase();
        const majorFilter = majorInput.value.toLowerCase();
        const tagFilter = tagSelect.value.toLowerCase();

        for (let card of profileList) {
          const name = card.getAttribute("data-name");
          const major = card.getAttribute("data-major");
          const tags = card.getAttribute("data-tags");

          const matchName = !nameFilter || name.includes(nameFilter);
          const matchMajor = !majorFilter || major.includes(majorFilter);
          const matchTags = !tagFilter || tags.includes(tagFilter);

          if (matchName && matchMajor && matchTags) {
            card.style.display = ""; // show
          } else {
            card.style.display = "none"; // hide
          }
        }
      }

      nameInput.addEventListener("input", filterProfiles);
      majorInput.addEventListener("input", filterProfiles);
      tagSelect.addEventListener("change", filterProfiles);
    </script>
  </body>
</html>
